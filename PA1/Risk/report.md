# 1. 使用算法

## 1.1 求解确诊病例数最大值

使用双端队列，遍历1~n，每次在适当的删除操作后向队尾加入i-1，保证序列单调递减；

此外，对于每一个m决定的区间，删掉队头超出范围的元素。

如此维护一个双向队列，队头存储的位置必然是区间内的确诊病例数最大的那天。

## 1.2 查询

先记录确诊病例数为k的天数共有几天，然后使用前缀和，实现$O(x_{max})$预处理$O(1)$查询。

# 2. 问题处理

在完成过程中遇到的主要问题有：输入输出的优化。使用getchar仍无法将时间优化至0.5s内，因此使用fgets。此外由于起初没有注意到有输入数据超过了int范围导致了错误，更改为longlong后解决。

# 3. 时空复杂度估算

## 3.1 时间复杂度

输入的时间复杂度为$O(n+m)$

求解每天对应区间的确诊病例数最大值时间复杂度为$O(n)$

数据预处理时间复杂度为$O(x_{max})$

查询时间复杂度为$O(m)$

总时间复杂度为$O(n+m+x_{max})$

## 3.2 空间复杂度

输入数据的空间复杂度为$O(n)$

记录每天对应区间的确诊病例数最大值的空间复杂度为$O(x_{max})$​

队列的空间复杂度为$O(n)$

总空间复杂度为$O(n + x_{max})$

# 4. 参考资料

课程微信群内有关fgets的讨论

