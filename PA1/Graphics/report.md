# 1. 使用算法

## 1.1 排序

使用归并排序算法实现my_sort函数。将目标序列分为两半，递归升序排序，然后合并。

临时存储所用的数组为my_sort函数的静态成员，以避免栈溢出。

排序作用的对象为存储x轴、y轴上点的x[]、y[]数组。

## 1.2 询问

使用二分查找。在0-n的范围内查找下标最小的与OP没有交点的线段。如果全部线段都与OP有交点则返回n。

具体而言，初始时令l = 0， r = n，令mid = (l + r ) / 2下取整，如果下标为mid的线段与OP有交点，则令l = mid + 1；否则令r = mid。然后继续二分查找直至l >= r。此时l即为返回值。

其正确性叙述如下：

当x、y数组已经升序排列，显然x[i]与y[i]分别是第i条线段的横截距和纵截距。如果第i条线段与OP有交点，显然第0, 1, 2, ..., i条线段均与OP有交点；如果第i条线段与OP无交点，显然第i, i + 1, i + 2, ..., n - 1条线段与OP无交点。

因此如果存在与OP没有交点的线段，则下标最小的与OP没有交点的线段的下标恰为交点数量。正确性成立。

# 2. 问题处理

在判定某线段与OP是否有交点时，最初并没有考虑极限数据的情况，而使用了int乘法。意识到这个问题后，将数据处理位置的局部数据改为longlong类型进行判定。

# 3. 时空复杂度估算

## 3.1 时间复杂度

输入的时间复杂度为$O(n)$

归并排序的时间复杂度为$O(nlogn)$

一次查询的时间复杂度为$O(logn)$

$m$次查询的时间复杂度为$O(mlogn)$

若$n < m$，总时间复杂度为$O(mlogn)$

若$m < n$，总时间复杂度为$O(nlogn)$

## 3.2 空间复杂度

截距坐标数据存储的空间复杂度为$O(n)$

归并排序的空间复杂度为$O(n)$

其余操作的空间复杂度均为$O(1)$

总空间复杂度为$O(n)$

# 4. 参考资料

课程讲义 归并排序 一节

